@model Tuple<Person, Person, Person>

@{
    var person = Model.Item1;
    var marriedOn = Model.Item2;
    var partner = Model.Item3;
}

<div class="row">
    <div class="col-md-12">
        <label>
            @if (person.IsMarried)
            {
                <i class="fas fa-ring text-success"></i>
                @(Shared.Helpers.FccEnumHelper.GetGenderizedText("MarriedMale|MarriedFemale", person.Sex))
                @*@Html.Hidden("MarriedOn_Id", marriedOn.Id)*@
                <a href="PersonDetail?personId=@marriedOn.Id">@marriedOn.Name</a>

                <a href="#" id="RemoveSpouse" inviter="@person.Id" invited="@marriedOn.Id" reltype="@((int)RelationType.HusbandWife)">
                    <i id="RemoveSpouse" class=" fas fa-trash text-danger"></i>
                </a>
            }
            else
            {
                <i class="fas fa-ring"></i>
                @Shared.Helpers.FccEnumHelper.GetGenderizedText("NotMarriedMale|NotMarriedFemale", person.Sex)

                <a href="#" id="AddSpouse" reltype="@((int)RelationType.HusbandWife)" data-toggle="modal" data-target="#NewSpouseModal">
                    <i class="fas fa-user-plus text-success"></i>
                </a>
            }
        </label>
    </div>
</div>

@if (!person.IsMarried)
{
    <div class="row">
        <div class="col-md-12">
            <label>
                @if (person.IsInPartnership)
                {
                    <i class="fas fa-ring text-success"></i>
                    @Resource.InLivePartnershipWith
                    @*@Html.Hidden("MarriedOn_Id", marriedOn.Id)*@
                    <a href="PersonDetail?personId=@partner.Id">@partner.Name</a>

                    <a href="#" id="RemoveSpouse" inviter="@person.Id" invited="@partner.Id" reltype="@((int)RelationType.LivePartner)">
                        <i id="RemoveSpouse" class=" fas fa-trash text-danger"></i>
                    </a>
                }
                else
                {
                    <i class="fas fa-venus-mars"></i>
                    @Resource.NotInLivePartnership

                    <a href="#" id="AddSpouse" reltype="@((int)RelationType.LivePartner)" data-toggle="modal" data-target="#NewSpouseModal">
                        <i class="fas fa-user-plus text-success"></i>
                    </a>
                }
            </label>
        </div>
    </div>
}

<div class="modal fade" id="NewSpouseModal" tabindex="-1" role="dialog" aria-labelledby="NewSpouseModal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                @*<h5 class="modal-title" id="NewSpouseLabel">@Resource.AddRelation</h5>*@
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                @Html.Raw(@Resource.MarriageSectionWarning)
            </div>
            <div class="modal-body">
                <div class="row form-group">
                    <div class="col-md-12">
                        @Html.Hidden("NewSpouseId", "")
                        @Html.TextBox("NewSpouseName", "", new { @class = "form-control typeahead", placeholder = "", taname = "PersonTypeahead", taurl = "typeahead/person/" + person.Id + "/" })
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">@Resource.Close</button>
            </div>
        </div>
    </div>
</div>